<div class="container">
    <div class="row top-buffer" >
        <div class="col-md-12">
            <div class="alert alert-info" *ngIf="successMessage != null"><span>{{successMessage}}</span>
            </div>
        </div>
    </div>
    <div class="row top-buffer" >
        <div class="col-md-12">
            <div class="alert alert-danger" *ngIf="errorMessage != null"><span>{{errorMessage}}</span>
            </div>
        </div>
    </div>

    <ul class="nav nav-tabs">
        <li class="active">
            <a data-toggle="tab" href="#overview">OVERVIEW</a>
        </li>
        <li>
            <a data-toggle="tab" href="#idd">IDD</a>
        </li>
        <li>
            <a data-toggle="tab" href="#odd">ODD</a>
        </li>
        <li>
            <a data-toggle="tab" href="#quant_dd">QUANT DD</a>
        </li>
    </ul>

    <div class="tab-content">
        <div id="overview" class="tab-pane fade in active">
            <br/>
            <div class="row">
                <div class="col-md-9">
                    <input type="text" class="form-control" placeholder="Enter fund name..."
                           [(ngModel)]="fund.name"/>
                </div>
            </div>
            <br/>
            <div class="row">
                <div class="col-md-12">
                    <textarea class="form-control" rows="5" placeholder="Enter fund summary..."
                              [(ngModel)]="fund.summary"></textarea>
                </div>
            </div>

            <br/>
            <div class="row">
                <div class="col-md-4">
                    <div class="row">
                        <br/>
                        <table class="table table-hover table-responsive table-condensed">
                            <tr>
                                <td>Inception date</td>
                                <td>
                                    <input type="text" class="form-control" [(ngModel)]="fund.inception"/>
                                </td>
                            </tr>
                            <tr>
                                <td>Firm AUM</td>
                                <td></td>
                            </tr>
                            <tr>
                                <td>Fund AUM</td>
                                <td>
                                    <input type="text" class="form-control" style="display:inline; width: 30%" [(ngModel)]="fund.aum"/>
                                    <select class="form-control" style="display:inline; width: 25%" [(ngModel)]="fund.aumDigit">
                                        <option value="MLN">M</option>
                                        <option value="BLN">B</option>
                                    </select>
                                    <select class="form-control" style="display:inline; width: 35%" [(ngModel)]="fund.aumCurrency">
                                        <option value="-">--</option>
                                        <option *ngFor="let currency of currencyLookup">{{currency.code}}</option>
                                    </select>
                                </td>
                            </tr>
                            <tr>
                                <td>Strategy</td>
                                <td>
                                    <select class="form-control" style="width: 100%" [(ngModel)]="fund.strategy" (ngModelChange)="strategyChanged()">
                                        <option value="-">---</option>
                                        <option *ngFor="let item of strategyLookup" [value]="item.code">{{item.nameEn}}</option>
                                    </select>
                                </td>
                            </tr>
                            <tr>
                                <td>Num Months</td>
                                <td>{{fund.numMonths}}</td>
                            </tr>
                            <tr>
                                <td>Num Positive Months</td>
                                <td>{{fund.numPositiveMonths}}</td>
                            </tr>
                            <tr>
                                <td>Num Negative Months</td>
                                <td>{{fund.numNegativeMonths}}</td>
                            </tr>
                            <tr>
                                <td>Return Since Inception</td>
                                <td>{{fund.returnSinceInception}}</td>
                            </tr>
                            <tr>
                                <td>Annualized Return</td>
                                <td>{{fund.annualizedReturn}}</td>
                            </tr>
                            <tr>
                                <td>YTD</td>
                                <td>{{fund.YTD}}</td>
                            </tr>
                            <tr>
                                <td>Beta</td>
                                <td>{{fund.beta}}</td>
                            </tr>
                            <tr>
                                <td>Annual Volatility</td>
                                <td>{{fund.annualVolatility}}</td>
                            </tr>
                            <tr>
                                <td>Worst Drawdown</td>
                                <td>{{fund.worstDrawdown}}</td>
                            </tr>
                            <tr>
                                <td>Sharpe Ratio</td>
                                <td>{{fund.sharpeRatio}}</td>
                            </tr>
                            <tr>
                                <td>Sortino Ratio</td>
                                <td>{{fund.sortinoRatio}}</td>
                            </tr>
                            <tr>
                                <td>Levarage</td>
                                <td><input type="text" class="form-control" [(ngModel)]="fund.leverage"/></td>
                            </tr>
                        </table>
                    </div>

                    <br/>
                    <div class="row">
                        <table>
                            <tr>
                                <td colspan="2">Fees & terms</td>
                            </tr>
                            <tr>
                                <td width="60%">Status</td>
                                <td width="40%">
                                    <select class="form-control" style="width: 100%" [(ngModel)]="fund.status">
                                        <option value="0">---</option>
                                        <option *ngFor="let item of fundStatusLookup" [value]="item.code">{{item.nameEn}}</option>
                                    </select>
                                </td>
                            </tr>
                            <tr>
                                <td>Management Fee</td>
                                <td>
                                    <input type="text" class="form-control" [(ngModel)]="fund.managementFee"/>
                                </td>
                            </tr>
                            <tr>
                                <td>Performance Fee</td>
                                <td><input type="text" class="form-control" [(ngModel)]="fund.performanceFee"/></td>
                            </tr>
                            <tr>
                                <td>Redemption Fee</td>
                                <td><input type="text" class="form-control" [(ngModel)]="fund.redemptionFee"/></td>
                            </tr>
                            <tr>
                                <td>Min initial Investment</td>
                                <td><input type="text" class="form-control" [(ngModel)]="fund.minInitialInvestment"/></td>
                            </tr>
                            <tr>
                                <td>Minimum Subs Investment</td>
                                <td><input type="text" class="form-control" [(ngModel)]="fund.minSubsInvestment"/></td>
                            </tr>
                            <tr>
                                <td>Subscription Frequency</td>
                                <td>
                                    <select class="form-control" style="width: 100%" [(ngModel)]="fund.subscriptionFrequency">
                                        <option value="0">---</option>
                                        <option *ngFor="let item of subscriptionFrequencyLookup" [value]="item.code">{{item.nameEn}}</option>
                                    </select>
                                </td>
                            </tr>
                            <tr>
                                <td>Redemption Frequency</td>
                                <td>
                                    <select class="form-control" style="width: 100%" [(ngModel)]="fund.redemptionFrequency">
                                        <option value="0">---</option>
                                        <option *ngFor="let item of redemptionFrequencyLookup" [value]="item.code">{{item.nameEn}}</option>
                                    </select>
                                </td>
                            </tr>
                            <tr>
                                <td>Redemption Notice Period</td>
                                <td>
                                    <select class="form-control" style="width: 100%" [(ngModel)]="fund.redemptionNotificationPeriod">
                                        <option value="0">---</option>
                                        <option *ngFor="let item of redemptionNotificationPeriodLookup" [value]="item.code">{{item.nameEn}}</option>
                                    </select>
                                </td>
                            </tr>
                            <tr>
                                <td>Side Pocket</td>
                                <td>
                                    <select class="form-control" style="width: 100%" [(ngModel)]="fund.sidePocket">
                                        <option value="0">---</option>
                                        <option *ngFor="let item of sidePocketLookup" [value]="item.code">{{item.nameEn}}</option>
                                    </select>
                                </td>
                            </tr>
                            <tr>
                                <td>Gates</td>
                                <td><input type="text" class="form-control" [(ngModel)]="fund.gates"/></td>
                            </tr>
                        </table>
                    </div>
                </div>

                <div class="col-md-1">&nbsp;</div>

                <div class="col-md-3">
                    <div class="row">
                        <br/>
                        <table class="table table-hover table-responsive table-condensed table-bordered">
                        <thead>
                            <tr>
                                <td colspan="3">Strategy Breakdown &nbsp;
                                    <button class="btn btn-xs btn-primary" type="button" (click)="addStrategyBreakdown()"
                                            [disabled]="fund.strategy == null || fund.strategy === '-'">
                                        <span role="button" class="glyphicon glyphicon-plus"></span>
                                    </button>
                                    <button class="btn btn-xs btn-success" type="button" (click)="drawGraph()"
                                            [disabled]="fund.strategy == null || fund.strategy === '-'">
                                        <span role="button" class="glyphicon glyphicon-refresh"></span>
                                    </button>
                                </td>
                            </tr>
                        </thead>
                        <div *ngIf="fund.strategyBreakdownList != null">
                        <tr  *ngFor="let item of fund.strategyBreakdownList">
                            <td width="70%">
                                <!--<input type="text" class="form-control" [(ngModel)]="item.name"/>-->
                                <select class="form-control" style="width: 100%" [(ngModel)]="item.code">
                                    <option value="0">---</option>
                                    <option *ngFor="let item of substrategyLookup" [value]="item.code">{{item.nameEn}}</option>
                                </select>
                            </td>
                            <td width="30%">
                                <input type="text" class="form-control" [(ngModel)]="item.value"/>
                            </td>
                            <td>
                                <button type="button" class="btn-xs btn-danger" style="display: inline-block"  (click)="removeStrategyBreakdown(item)">
                                    <span class="glyphicon glyphicon-minus"></span>
                                </button>
                            </td>
                        </tr>
                        </div>
                    </table>
                    </div>

                    <br/>
                    <div class="row">
                        <table class="table table-hover table-responsive table-condensed">
                            <thead>
                                <tr>
                                    <td colspan="3">Investor base &nbsp;
                                        <button class="btn-xs btn-primary" type="button" (click)="addInvestorBase()">
                                            <span class="glyphicon glyphicon-plus"></span>
                                        </button>
                                    </td>
                                </tr>
                            </thead>
                        <tr>
                            <td>Category</td>
                            <td>Fund</td>
                        </tr>
                        <div *ngIf="fund.investorBaseList != null">
                        <tr *ngFor="let item of fund.investorBaseList">
                            <td width="70%">
                                <input type="text" class="form-control"[(ngModel)]="item.category"/>
                            </td>
                            <td width="30%">
                                <input type="text" class="form-control"[(ngModel)]="item.fund"/>
                            </td>
                            <td>
                                <button type="button" class="btn-xs btn-danger" style="display: inline-block"  (click)="removeInvestorBase(item)">
                                    <span class="glyphicon glyphicon-minus"></span>
                                </button>
                            </td>
                        </tr>
                        </div>

                    </table>
                    </div>

                    <br/>
                    <div class="row">
                        <table class="">
                            <tr>
                                <td colspan="2">Liquidity</td>
                            </tr>
                            <tr>
                                <td>
                                    <input type="text" class="form-control" [(ngModel)]="fund.liquidityPercent"/>
                                </td>
                                <td> &nbsp; </td>
                                <td>
                                    <input type="text" class="form-control" [(ngModel)]="fund.liquidityPeriod"/>
                                </td>
                            </tr>
                        </table>
                    </div>

                    <br/>
                    <div class="row">
                        <table class="table table-responsive table-hover">
                            <tr>
                                <td colspan="2">Concentration</td>
                            </tr>
                            <tr>
                                <td>Top 5</td>
                                <td>
                                    <input type="text" class="form-control" [(ngModel)]="fund.concentrationTop5"/>
                                </td>
                            </tr>
                            <tr>
                                <td>Top 10</td>
                                <td>
                                    <input type="text" class="form-control" [(ngModel)]="fund.concentrationTop10"/>
                                </td>
                            </tr>
                            <tr>
                                <td>Top 20</td>
                                <td>
                                    <input type="text" class="form-control" [(ngModel)]="fund.concentrationTop20"/>
                                </td>
                            </tr>
                        </table>
                    </div>
                </div>

                <!--<div class="col-md-1">&nbsp;</div>-->

                <div class="col-md-4">
                    <div id="strategyBreakdownChart"></div>
                </div>
            </div>

            <div class="row">
                <br/>
                <table class="table table-hover table-responsive table-condensed table-bordered">
                    <thead>
                        <tr>
                            <td colspan="2">Fund Managers &nbsp;
                                <button class="btn-xs btn-primary" type="button" (click)="addFundManager()">
                                    <span class="glyphicon glyphicon-plus" align="right"></span>
                                </button>
                            </td>
                        </tr>
                    </thead>
                    <tr *ngFor="let manager of fund.managers">
                        <td width="20%">
                            <input type="text" class="form-control" [(ngModel)]="manager.name" placeholder="Name..."/>
                        </td>
                        <td width="50%">
                            <input type="text" class="form-control"[(ngModel)]="manager.description" placeholder="Description..."/>
                        </td>
                        <td width="20%">
                            <input type="text" class="form-control"[(ngModel)]="manager.started" placeholder="Since..."/>
                        </td>
                        <td>
                            <button type="button" class="btn-xs btn-danger" style="display: inline-block"  (click)="removeFundManager(manager)">
                                <span class="glyphicon glyphicon-minus"></span>
                            </button>
                        </td>
                    </tr>
                </table>
            </div>

            <br/>
            <div class="row">
                <div class="col-md-6">
                    <table class="table table-responsive table-hover">
                    <tr>
                        <td width="40%">IDD Analyst Assessment</td>
                        <td width="15%" style="font-weight: bold">
                            <select class="form-control" style="width: 100%" [(ngModel)]="fund.albourneIddAnalysisAssessment" [style.background-color]="getAlbourneRatingColor('IDD_AA')">
                                <option value="0">---</option>
                                <option *ngFor="let item of albourneRatingLookup.IDD_AA" [value]="item.value">{{item.value}}</option>
                            </select>
                        </td>
                        <td width="45%">{{getAlbourneRatingText('IDD_AA')}}</td>
                    </tr>
                    <tr>
                        <td>Conviction</td>
                        <!--<td style="font-weight: bold" [style.background-color]="getAlbourneRatingColor('CONVICTION', fund.ALBConviction)">{{fund.ALBConviction}}</td>-->
                        <!--<td>{{getAlbourneRatingText('CONVICTION', fund.ALBConviction)}}</td>-->
                        <td style="font-weight: bold" >
                            <select class="form-control" style="width: 100%" [(ngModel)]="fund.albourneConviction" [style.background-color]="getAlbourneRatingColor('CONVICTION')">
                                <option value="0">---</option>
                                <option *ngFor="let item of albourneRatingLookup.CONVICTION" [value]="item.value">{{item.value}}</option>
                            </select>
                        </td>
                        <td>{{getAlbourneRatingText('CONVICTION')}}</td>
                    </tr>
                    <tr>
                        <td>Expected Alpha</td>
                        <!--<td style="font-weight: bold" [style.background-color]="getAlbourneRatingColor('EXPECTED_ALPHA', fund.ALBExpectedAlpha)">{{fund.ALBExpectedAlpha}}</td>-->
                        <!--<td>{{getAlbourneRatingText('EXPECTED_ALPHA', fund.ALBExpectedAlpha)}}</td>-->
                        <td style="font-weight: bold" >
                            <!--{{fund.ALBIDDAnalystAssessment}}-->
                            <select class="form-control" style="width: 100%" [(ngModel)]="fund.albourneExpectedAlpha" [style.background-color]="getAlbourneRatingColor('EXPECTED_ALPHA')">
                                <option value="0">---</option>
                                <option *ngFor="let item of albourneRatingLookup.EXPECTED_ALPHA" [value]="item.value">{{item.value}}</option>
                            </select>
                        </td>
                        <td>{{getAlbourneRatingText('EXPECTED_ALPHA')}}</td>
                    </tr>
                    <tr>
                        <td>Expected Beta</td>
                        <!--<td style="font-weight: bold" [style.background-color]="getAlbourneRatingColor('EXPECTED_BETA', fund.ALBExpectedBeta)">{{fund.ALBExpectedBeta}}</td>-->
                        <!--<td>{{getAlbourneRatingText('EXPECTED_BETA', fund.ALBExpectedBeta)}}</td>-->
                        <td style="font-weight: bold" >
                            <!--{{fund.ALBIDDAnalystAssessment}}-->
                            <select class="form-control" style="width: 100%" [(ngModel)]="fund.albourneExpectedBeta" [style.background-color]="getAlbourneRatingColor('EXPECTED_BETA')">
                                <option value="0">---</option>
                                <option *ngFor="let item of albourneRatingLookup.EXPECTED_BETA" [value]="item.value">{{item.value}}</option>
                            </select>
                        </td>
                        <td>{{getAlbourneRatingText('EXPECTED_BETA')}}</td>
                    </tr>
                    <tr>
                        <td>Expected Risk</td>
                        <!--<td style="font-weight: bold" [style.background-color]="getAlbourneRatingColor('EXPECTED_RISK', fund.ALBExpectedRisk)">{{fund.ALBExpectedRisk}}</td>-->
                        <!--<td>{{getAlbourneRatingText('EXPECTED_RISK', fund.ALBExpectedRisk)}}</td>-->
                        <td style="font-weight: bold" >
                            <!--{{fund.ALBIDDAnalystAssessment}}-->
                            <select class="form-control" style="width: 100%" [(ngModel)]="fund.alalbournebExpectedRisk" [style.background-color]="getAlbourneRatingColor('EXPECTED_RISK')">
                                <option value="0">---</option>
                                <option *ngFor="let item of albourneRatingLookup.EXPECTED_RISK" [value]="item.value">{{item.value}}</option>
                            </select>
                        </td>
                        <td>{{getAlbourneRatingText('EXPECTED_RISK')}}</td>
                    </tr>
                    <tr>
                        <td>Strategy & Investment Process</td>
                        <!--<td style="font-weight: bold" [style.background-color]="getAlbourneRatingColor('STRATEGY_INVESTMENT', fund.ALBStrategyInvestmentProcess)">{{fund.ALBStrategyInvestmentProcess}}</td>-->
                        <!--<td>{{getAlbourneRatingText('STRATEGY_INVESTMENT', fund.ALBStrategyInvestmentProcess)}}</td>-->
                        <td style="font-weight: bold" >
                            <!--{{fund.ALBIDDAnalystAssessment}}-->
                            <select class="form-control" style="width: 100%" [(ngModel)]="fund.albourneStrategyInvestmentProcess" [style.background-color]="getAlbourneRatingColor('STRATEGY_INVESTMENT')">
                                <option value="0">---</option>
                                <option *ngFor="let item of albourneRatingLookup.STRATEGY_INVESTMENT" [value]="item.value">{{item.value}}</option>
                            </select>
                        </td>
                        <td>{{getAlbourneRatingText('STRATEGY_INVESTMENT')}}</td>
                    </tr>
                    <tr>
                        <td>Management & Team</td>
                        <!--<td style="font-weight: bold" [style.background-color]="getAlbourneRatingColor('MNG_TEAM', fund.ALBManagementTeam)">{{fund.ALBManagementTeam}}</td>-->
                        <!--<td>{{getAlbourneRatingText('MNG_TEAM', fund.ALBManagementTeam)}}</td>-->
                        <td style="font-weight: bold" >
                            <!--{{fund.ALBIDDAnalystAssessment}}-->
                            <select class="form-control" style="width: 100%" [(ngModel)]="fund.albourneManagementTeam" [style.background-color]="getAlbourneRatingColor('MNG_TEAM')">
                                <option value="0">---</option>
                                <option *ngFor="let item of albourneRatingLookup.MNG_TEAM" [value]="item.value">{{item.value}}</option>
                            </select>
                        </td>
                        <td>{{getAlbourneRatingText('MNG_TEAM')}}</td>
                    </tr>
                    <tr>
                        <td>Risk Process</td>
                        <!--<td style="font-weight: bold" [style.background-color]="getAlbourneRatingColor('RISK_PROCESS', fund.ALBRiskProcess)">{{fund.ALBRiskProcess}}</td>-->
                        <!--<td>{{getAlbourneRatingText('RISK_PROCESS', fund.ALBRiskProcess)}}</td>-->
                        <td style="font-weight: bold" >
                            <!--{{fund.ALBIDDAnalystAssessment}}-->
                            <select class="form-control" style="width: 100%" [(ngModel)]="fund.albourneRiskProcess" [style.background-color]="getAlbourneRatingColor('RISK_PROCESS')">
                                <option value="0">---</option>
                                <option *ngFor="let item of albourneRatingLookup.RISK_PROCESS" [value]="item.value">{{item.value}}</option>
                            </select>
                        </td>
                        <td>{{getAlbourneRatingText('RISK_PROCESS')}}</td>
                    </tr>
                </table>
                </div>
            </div>

            <br/>
            <div class="row">
                <div class="col-md-11">
                    <table class="table table-responsive table-hover table-bordered">
                    <thead>
                        <tr style="font-weight: bold; background-color: lightcyan">
                            <td>Year</td>
                            <td>Jan</td>
                            <td>Feb</td>
                            <td>Mar</td>
                            <td>Apr</td>
                            <td>May</td>
                            <td>Jun</td>
                            <td>Jul</td>
                            <td>Aug</td>
                            <td>Sep</td>
                            <td>Oct</td>
                            <td>Nov</td>
                            <td>Dec</td>
                            <td>YTD</td>
                            <td></td>
                        </tr>
                    </thead>
                    <tbody>
                        <tr *ngFor="let return of fund.returns">
                            <td><input type="text" size="4" class="form-control"[(ngModel)]="return.year"/></td>
                            <td><input type="text" size="2" class="form-control"[(ngModel)]="return.jan" (ngModelChange)="calculateReturnsYTD(return)"/></td>
                            <td><input type="text" size="2" class="form-control"[(ngModel)]="return.feb"/></td>
                            <td><input type="text" size="2" class="form-control"[(ngModel)]="return.mar"/></td>
                            <td><input type="text" size="2" class="form-control"[(ngModel)]="return.apr"/></td>
                            <td><input type="text" size="2" class="form-control"[(ngModel)]="return.may"/></td>
                            <td><input type="text" size="2" class="form-control"[(ngModel)]="return.jun"/></td>
                            <td><input type="text" size="2" class="form-control"[(ngModel)]="return.jul"/></td>
                            <td><input type="text" size="2" class="form-control"[(ngModel)]="return.aug"/></td>
                            <td><input type="text" size="2" class="form-control"[(ngModel)]="return.sep"/></td>
                            <td><input type="text" size="2" class="form-control"[(ngModel)]="return.oct"/></td>
                            <td><input type="text" size="2" class="form-control"[(ngModel)]="return.nov"/></td>
                            <td><input type="text" size="2" class="form-control"[(ngModel)]="return.dec"/></td>
                            <td><input type="text" readonly size="2" class="form-control" [value]="calculateReturnsYTD(return)"/></td>
                            <td><button type="button" class="btn-xs btn-danger" style="display: inline-block"  (click)="removeReturn(return)">
                                <span class="glyphicon glyphicon-minus"></span>
                            </button></td>
                        </tr>
                    </tbody>
                </table>
                </div>

                <div class="col-md-1">
                    <button class="btn-xs btn-primary" type="button" (click)="addReturn()">
                        <span class="glyphicon glyphicon-plus"></span>
                    </button>
                </div>
            </div>

            <br/>
            <div class="row">
                <div class="col-md-12">
                    <div class="col-md-1 pull-right">
                        <button class="btn btn-success" (click)="save()">SAVE</button>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-12">
                    <hr style="border-top: 1px solid #B5AEAE"/>
                </div>
            </div>

        </div>
        <div id="idd" class="tab-pane fade">
            Investment Due Diligence
        </div>
        <div id="odd" class="tab-pane fade">
            Operational Due Diligence
        </div>
        <div id="quant_dd" class="tab-pane fade">
            Quantitative Due Diligence
        </div>
    </div>
</div>