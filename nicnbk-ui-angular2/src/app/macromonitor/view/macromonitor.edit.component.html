<div class="container">
    <div class="row top-buffer" >
        <div class="col-md-12">
            <div class="alert alert-danger" *ngIf="errorMessage != null"><span>{{errorMessage}}</span>
            </div>
        </div>
        <div class="col-md-12">
            <div class="alert alert-info" *ngIf="successMessage != null"><span>{{successMessage}}</span>
            </div>
        </div>
    </div>

    <!--<div class="row">-->
    <!--<div class="col-md-12">-->
    <!--<table class="table table-hover table-responsive" style="font-size: smaller">-->
    <!--<tr>-->
    <!--<th>Date</th>-->
    <!--<th *ngFor="let field of fieldsLookup">{{field.nameEn}}</th>-->
    <!--</tr>-->
    <!--<tr *ngFor="let itemList of scoreListInput; let i=index">-->
    <!--<td>-->
    <!--<input class="input-group date" style="width: 100%" type="date" name="scoreDate" [(ngModel)]="dateListInput[i]">-->
    <!--</td>-->
    <!--<td *ngFor="let item of itemList">-->
    <!--<input style="width: 100%" type="text" [(ngModel)]="item.score">-->
    <!--</td>-->
    <!--<td>-->
    <!--<button type="button" class="btn-xs btn-danger" style="display: inline-block" (click)="removeRow(itemList, i)">-->
    <!--<span class="glyphicon glyphicon-minus"></span>-->
    <!--</button>-->
    <!--</td>-->
    <!--</tr>-->
    <!--<button type="button" class="btn-xs btn-info" style="display: inline-block" (click)="addRow()">-->
    <!--<span class="glyphicon glyphicon-plus"></span>-->
    <!--</button>-->
    <!--</table>-->
    <!--<button type="button" class="btn-xs btn-info" style="display: inline-block" (click)="save()">Save</button>-->
    <!--</div>-->
    <!--</div>-->
    <div class="row">
        <div class="col-md-12">
            <h4>Macro Monitor: {{typeStr}}</h4>
        </div>
    </div>
    <div class="row">
        <div class="col-md-12">
            <table class="table table-hover table-responsive" style="font-size: smaller; overflow: scroll; overflow: auto; display: block" >
                <tr>
                    <th>
                        <button type="btn-xs btn-info" class="pull-left" data-toggle="modal" data-target="#dateInputModal">
                            <span class="glyphicon glyphicon-circle-arrow-up"></span>
                        </button>
                    </th>
                    <th></th>
                    <th *ngFor="let dateItem of dateList; let i=index; trackBy:trackByIndex;">
                        <!--<div class='input-group' id="scoresDate" name='scoresDate' style="width: 100%">-->
                        <input type="text" style="width: 100%" [(ngModel)]="dateList[i]"/>
                        <!--</div>-->
                    </th>
                </tr>
                <tr *ngFor="let field of fieldsLookup; let j=index">
                    <td>
                        <button type="btn-xs btn-info" class="pull-left" data-toggle="modal" data-target="#macroScoreInputModal" (click)="macroScoreInputModalHelper(j)">
                            <span class="glyphicon glyphicon-circle-arrow-up"></span>
                        </button>
                    </td>
                    <td width="200">
                        {{field.nameEn}}
                    </td>
                    <td *ngFor="let item of scoreListForModel[j]; let i=index">
                        <input style="width: 100%" type="text" [(ngModel)]="item.score">
                    </td>
                </tr>
                <tr>
                    <td></td>
                    <td></td>
                    <td *ngFor="let item of scoreListForModel[0]; let i=index">
                        <button type="button" class="btn-xs btn-danger" style="display: inline-block" (click)="removeColumn(i)">
                            <span class="glyphicon glyphicon-minus"></span>
                        </button>
                    </td>
                </tr>
                <!--<tr *ngFor="let itemList of scoreListInput; let i=index">-->
                <!--<td>-->
                <!--<input class="input-group date" style="width: 100%" type="date" name="scoreDate" [(ngModel)]="dateListInput[i]">-->
                <!--</td>-->
                <!--<td *ngFor="let item of itemList">-->
                <!--<input style="width: 100%" type="text" [(ngModel)]="item.score">-->
                <!--</td>-->
                <!--<td>-->
                <!--<button type="button" class="btn-xs btn-danger" style="display: inline-block" (click)="removeRow(itemList, i)">-->
                <!--<span class="glyphicon glyphicon-minus"></span>-->
                <!--</button>-->
                <!--</td>-->
                <!--</tr>-->
                <button type="button" class="btn-xs btn-info" style="display: inline-block" (click)="addRow()">
                    <span class="glyphicon glyphicon-plus"></span>
                </button>
                <br/>
                <br/>
            </table>
            <button type="button" id="saveButton" class="btn-xs btn-info pull-right" style="display: inline-block" (click)="save()">Save</button>
        </div>
    </div>
    <div class="modal fade" id="macroScoreInputModal" role="dialog">
        <div class="modal-dialog" style="overflow-y: scroll; max-height:85%;  margin-top: 50px; margin-bottom:50px;">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                </div>
                <div class="modal-body">
                    <div class="alert alert-danger" *ngIf="scoreUploadErrorMessage != null"><span>{{scoreUploadErrorMessage}}</span></div>
                    <div class="alert alert-info" *ngIf="scoreUploadSuccessMessage != null"><span>{{scoreUploadSuccessMessage}}</span></div>
                    <br/>
                    <textarea class="form-control" placeholder="Paste macromonitor score here..." name="uploadedMacroMonitorScores" [(ngModel)]="uploadedMacroMonitorScores"></textarea>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default pull-left" data-dismiss="modal" (click)='closeMacroMonitorScoresModal()'>Close</button>
                    <button type="button" class="btn btn-success pull-right" (click)="parseMacroMonitorScoresModal()">Add</button>
                </div>
            </div>
        </div>
    </div>
    <div class="modal fade" id="dateInputModal" role="dialog">
        <div class="modal-dialog" style="max-height:100%;  margin-top: 50px; margin-bottom:50px;">
            <div class="modal-content">
                <div class="modal-header">
                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                    <span>Date format: DD-MM-YYYY, e.g. 31-12-2017</span>
                </div>
                <div class="modal-body">
                    <div class="alert alert-danger" *ngIf="scoreUploadErrorMessage != null"><span>{{scoreUploadErrorMessage}}</span></div>
                    <div class="alert alert-info" *ngIf="scoreUploadSuccessMessage != null"><span>{{scoreUploadSuccessMessage}}</span></div>
                    <br/>
                    <textarea class="form-control" placeholder="Paste list of dates here..." name="uploadedDates" [(ngModel)]="uploadedDates"></textarea>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-default pull-left" data-dismiss="modal" (click)='closeMacroMonitorScoresModal()'>Close</button>
                    <button type="button" class="btn btn-success pull-right" (click)="createNewDateList()">Add</button>
                </div>
            </div>
        </div>
    </div>
</div>